{"ast":null,"code":"import Axios from 'axios';\nimport { USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_REGISTER_FAIL, USER_REGISTER_SUCCESS, USER_SIGNIN_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNOUT } from '../constants/userConstants';\nexport const register = (email, password) => async dispatch => {\n  dispatch({\n    type: USER_SIGNIN_REQUEST,\n    payload: {\n      email,\n      password\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post('/api/users/register', {\n      email,\n      password\n    });\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const signin = (email, password) => async dispatch => {\n  dispatch({\n    type: USER_SIGNIN_REQUEST,\n    payload: {\n      email,\n      password\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post('/api/users/signin', {\n      email,\n      password\n    });\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_SIGNIN_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\nexport const signout = () => dispatch => {\n  localStorage.removeItem('userInfo');\n  localStorage.removeItem('cartItems');\n  localStorage.removeItem('shippingAddress');\n  dispatch({\n    type: USER_SIGNOUT\n  });\n};\nexport const detailsUser = userId => async (dispatch, getState) => {\n  dispatch({\n    type: USER_DETAILS_REQUEST,\n    payload: userId\n  });\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState(); // getting token from getState\n\n  try {\n    const {\n      data\n    } = Axios.get(`/api/users/${userId}`, {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`\n      }\n    });\n    dispatch({\n      types: USER_DETAILS_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    const message = error.response && error.response.data.message ? error.response.data.message : error.message;\n    dispatch({\n      type: USER_DETAILS_FAIL,\n      payload: message\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/PRITHESH DWIVEDI/OneDrive/Documents/GitHub/E-Commerce/amazon/frontend/src/actions/userActions.js"],"names":["Axios","USER_DETAILS_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_REGISTER_FAIL","USER_REGISTER_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNOUT","register","email","password","dispatch","type","payload","data","post","localStorage","setItem","JSON","stringify","error","response","message","signin","signout","removeItem","detailsUser","userId","getState","userSignin","userInfo","get","headers","Authorization","token","types"],"mappings":"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","sourcesContent":["import Axios from 'axios';\r\nimport {USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS, USER_REGISTER_FAIL, USER_REGISTER_SUCCESS, USER_SIGNIN_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS,  USER_SIGNOUT, } from '../constants/userConstants';\r\n\r\nexport const register = (email, password) => async (dispatch) => {\r\n \r\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { email, password } });\r\n \r\n  try {\r\n  \r\n    const { data } = await Axios.post('/api/users/register', { email, password });\r\n    dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\r\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\r\n    localStorage.setItem('userInfo', JSON.stringify(data));\r\n  } \r\n  \r\n  catch (error) {\r\n  \r\n    dispatch({\r\n      type: USER_REGISTER_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const signin = (email, password) => async (dispatch) => {\r\n \r\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { email, password } });\r\n \r\n  try {\r\n  \r\n    const { data } = await Axios.post('/api/users/signin', { email, password });\r\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\r\n    localStorage.setItem('userInfo', JSON.stringify(data));\r\n  } \r\n  \r\n  catch (error) {\r\n  \r\n    dispatch({\r\n      type: USER_SIGNIN_FAIL,\r\n      payload:\r\n        error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const signout = () => (dispatch) => {\r\n  localStorage.removeItem('userInfo');\r\n  localStorage.removeItem('cartItems');\r\n  localStorage.removeItem('shippingAddress');\r\n  dispatch({ type: USER_SIGNOUT });\r\n};\r\n\r\nexport const detailsUser=(userId)=>async(dispatch,getState)=>{\r\n\r\n  dispatch({type:USER_DETAILS_REQUEST,payload:userId});\r\n\r\nconst {userSignin:{userInfo}}= getState();    // getting token from getState\r\n\r\ntry{\r\nconst {data}=Axios.get(`/api/users/${userId}`,{\r\n  headers:{Authorization:`Bearer ${userInfo.token}`},\r\n\r\n});\r\n\r\ndispatch({types:USER_DETAILS_SUCCESS,payload:data});\r\n}\r\n\r\ncatch(error){\r\n  const message=\r\n  error.response && error.response.data.message\r\n          ? error.response.data.message\r\n          : error.message;\r\n\r\n  dispatch({type:USER_DETAILS_FAIL,payload:message})\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}